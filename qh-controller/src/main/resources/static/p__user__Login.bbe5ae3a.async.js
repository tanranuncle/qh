(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{5894:function(Me,k,e){"use strict";e.d(k,{A:function(){return b}});var $e=e(9715),J=e(55843),le=e(22122),s=e(67294),P=e(24214),B=e(96156),U=e(49111),q=e(19650),F=e(84305),oe=e(39559),ie=e(28481),R=e(28991),v=e(8812),$=e(28664),K=e(58927),c=e(94184),n=e.n(c),Q=e(66758),ue=e(2514),ce=e(96138),S=s.forwardRef(function(g,ve){var _=s.useContext(Q.Z),j=_.groupProps,p=(0,R.Z)((0,R.Z)({},j),g),Ee=p.children,ee=p.collapsible,Be=p.defaultCollapsed,De=p.style,Ke=p.labelLayout,Pe=p.title,me=Pe===void 0?g.label:Pe,Ne=p.tooltip,ye=p.align,Ie=ye===void 0?"start":ye,Ce=p.direction,Re=p.size,xe=Re===void 0?32:Re,te=p.titleStyle,fe=p.titleRender,L=p.spaceProps,ae=p.extra,ge=p.autoFocus,Ae=(0,$.Z)(function(){return Be||!1},{value:g.collapsed,onChange:g.onCollapse}),Fe=(0,ie.Z)(Ae,2),pe=Fe[0],He=Fe[1],be=(0,s.useContext)(oe.ZP.ConfigContext),ze=be.getPrefixCls,Le=(0,ue.z)(g),Ge=Le.ColWrapper,Te=Le.RowWrapper,X=ze("pro-form-group"),Se=ee&&s.createElement(v.Z,{style:{marginRight:8},rotate:pe?void 0:90}),he=s.createElement(K.Z,{label:Se?s.createElement("div",null,Se,me):me,tooltip:Ne}),je=(0,s.useCallback)(function(z){var w=z.children;return s.createElement(q.Z,(0,le.Z)({},L,{className:n()("".concat(X,"-container"),L==null?void 0:L.className),size:xe,align:Ie,direction:Ce,style:(0,R.Z)({rowGap:0},L==null?void 0:L.style)}),w)},[Ie,X,Ce,xe,L]),ne=fe?fe(he,g):he,We=(0,s.useMemo)(function(){var z=[],w=s.Children.toArray(Ee).map(function(t,o){var i;return s.isValidElement(t)&&(t==null||(i=t.props)===null||i===void 0?void 0:i.hidden)?(z.push(t),null):o===0&&s.isValidElement(t)&&ge?s.cloneElement(t,(0,R.Z)((0,R.Z)({},t.props),{},{autoFocus:ge})):t});return[s.createElement(Te,{key:"children",Wrapper:je},w),z.length>0?s.createElement("div",{style:{display:"none"}},z):null]},[Ee,Te,je,ge]),D=(0,ie.Z)(We,2),a=D[0],Oe=D[1];return s.createElement(Ge,null,s.createElement("div",{className:n()(X,(0,B.Z)({},"".concat(X,"-twoLine"),Ke==="twoLine")),style:De,ref:ve},Oe,(me||Ne||ae)&&s.createElement("div",{className:"".concat(X,"-title"),style:te,onClick:function(){He(!pe)}},ae?s.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},ne,s.createElement("span",{onClick:function(w){return w.stopPropagation()}},ae)):ne),ee&&pe?null:a))});S.displayName="ProForm-Group";var A=S,de=e(38077);function b(g){return s.createElement(P.I,(0,le.Z)({layout:"vertical",submitter:{render:function(_,j){return j.reverse()}},contentRender:function(_,j){return s.createElement(s.Fragment,null,_,j)}},g))}b.Group=A,b.useForm=J.Z.useForm,b.Item=de.Z},58927:function(Me,k,e){"use strict";var $e=e(22385),J=e(45777),le=e(96156),s=e(84305),P=e(39559),B=e(68628),U=e(94184),q=e.n(U),F=e(67294),oe=e(11445),ie=e.n(oe),R=function($){var K=$.label,c=$.tooltip,n=$.ellipsis,Q=$.subTitle,ue=(0,F.useContext)(P.ZP.ConfigContext),ce=ue.getPrefixCls;if(!c&&!Q)return F.createElement(F.Fragment,null,K);var S=ce("pro-core-label-tip"),A=typeof c=="string"||F.isValidElement(c)?{title:c}:c,de=(A==null?void 0:A.icon)||F.createElement(B.Z,null);return F.createElement("div",{className:S,onMouseDown:function(g){return g.stopPropagation()},onMouseLeave:function(g){return g.stopPropagation()},onMouseMove:function(g){return g.stopPropagation()}},F.createElement("div",{className:q()("".concat(S,"-title"),(0,le.Z)({},"".concat(S,"-title-ellipsis"),n))},K),Q&&F.createElement("div",{className:"".concat(S,"-subtitle")},Q),c&&F.createElement(J.Z,A,F.createElement("span",{className:"".concat(S,"-icon")},de)))};k.Z=F.memo(R)},34687:function(Me){Me.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},96138:function(){},32384:function(){},11445:function(){},5482:function(Me,k,e){"use strict";e.r(k),e.d(k,{default:function(){return w}});var $e=e(18106),J=e(95562),le=e(34792),s=e(48086),P=e(39428),B=e(11849),U=e(3182),q=e(2824),F=e(17462),oe=e(76772),ie=e(70738),R=e(36571),v=e(25377);function $(t,o){return K.apply(this,arguments)}function K(){return K=(0,U.Z)((0,P.Z)().mark(function t(o,i){return(0,P.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,v.WY)("/api/login/captcha",(0,B.Z)({method:"GET",params:(0,B.Z)({},o)},i||{})));case 1:case"end":return y.stop()}},t)})),K.apply(this,arguments)}var c=e(28991),n=e(67294),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ue=Q,ce=e(27029),S=function(o,i){return n.createElement(ce.Z,(0,c.Z)((0,c.Z)({},o),{},{ref:i,icon:ue}))};S.displayName="LockOutlined";var A=n.forwardRef(S),de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},b=de,g=function(o,i){return n.createElement(ce.Z,(0,c.Z)((0,c.Z)({},o),{},{ref:i,icon:b}))};g.displayName="MobileOutlined";var ve=n.forwardRef(g),_=e(89366),j=e(22122),p=e(84305),Ee=e(39559),ee=e(81253),Be=e(97739),De=e(5894),Ke=e(32384),Pe=["logo","message","contentStyle","title","subTitle","actions","children"];function me(t){var o=t.logo,i=t.message,T=t.contentStyle,y=t.title,H=t.subTitle,G=t.actions,W=t.children,d=(0,ee.Z)(t,Pe),V=(0,Be.YB)(),Y=d.submitter===!1?!1:(0,c.Z)((0,c.Z)({searchConfig:{submitText:V.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},d.submitter),{},{render:function(N,Z){var u,m,f=Z.pop();if((d==null||(u=d.submitter)===null||u===void 0?void 0:u.render)===void 0)return f;if(typeof(d==null||(m=d.submitter)===null||m===void 0?void 0:m.render)=="function"){var M,l;return d==null||(M=d.submitter)===null||M===void 0||(l=M.render)===null||l===void 0?void 0:l.call(M,N,Z)}return f}}),re=(0,n.useContext)(Ee.ZP.ConfigContext),h=re.getPrefixCls("pro-form-login"),C=function(N){return"".concat(h,"-").concat(N)},se=(0,n.useMemo)(function(){return o?typeof o=="string"?n.createElement("img",{src:o}):o:null},[o]);return n.createElement("div",{className:C("container")},n.createElement("div",{className:C("top")},y||se?n.createElement("div",{className:C("header")},se?n.createElement("span",{className:C("logo")},se):null,y?n.createElement("span",{className:C("title")},y):null):null,H?n.createElement("div",{className:C("desc")},H):null),n.createElement("div",{className:C("main"),style:(0,c.Z)({width:328},T)},n.createElement(De.A,(0,j.Z)({isKeyPressSubmit:!0},d,{submitter:Y}),i,W),G?n.createElement("div",{className:C("other")},G):null))}var Ne=e(9715),ye=e(55843),Ie=e(57663),Ce=e(71577),Re=e(47673),xe=e(4107),te=e(55507),fe=e(92137),L=e(28481),ae=e(95285),ge=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Ae=n.forwardRef(function(t,o){var i=(0,n.useState)(t.countDown||60),T=(0,L.Z)(i,2),y=T[0],H=T[1],G=(0,n.useState)(!1),W=(0,L.Z)(G,2),d=W[0],V=W[1],Y=(0,n.useState)(),re=(0,L.Z)(Y,2),h=re[0],C=re[1],se=t.rules,Ze=t.name,N=t.phoneName,Z=t.fieldProps,u=t.captchaTextRender,m=u===void 0?function(E,O){return E?"".concat(O," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:u,f=t.captchaProps,M=(0,ee.Z)(t,ge),l=function(){var E=(0,fe.Z)((0,te.Z)().mark(function O(I){return(0,te.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,C(!0),r.next=4,M.onGetCaptcha(I);case 4:C(!1),V(!0),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(0),V(!1),C(!1),console.log(r.t0);case 13:case"end":return r.stop()}},O,null,[[0,8]])}));return function(I){return E.apply(this,arguments)}}();return(0,n.useEffect)(function(){var E=0,O=t.countDown;return d&&(E=window.setInterval(function(){H(function(I){return I<=1?(V(!1),clearInterval(E),O||60):I-1})},1e3)),function(){return clearInterval(E)}},[d]),n.createElement(ye.Z.Item,{noStyle:!0,shouldUpdate:!0},function(E){var O=E.getFieldValue,I=E.validateFields;return n.createElement("div",{style:(0,c.Z)((0,c.Z)({},Z==null?void 0:Z.style),{},{display:"flex",alignItems:"center"}),ref:o},n.createElement(xe.Z,(0,j.Z)({},Z,{style:{flex:1,transition:"width .3s",marginRight:8}})),n.createElement(Ce.Z,(0,j.Z)({style:{display:"block"},disabled:d,loading:h},f,{onClick:(0,fe.Z)((0,te.Z)().mark(function Ue(){var r;return(0,te.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(x.prev=0,!N){x.next=9;break}return x.next=4,I([N].flat(1));case 4:return r=O([N].flat(1)),x.next=7,l(r);case 7:x.next=11;break;case 9:return x.next=11,l("");case 11:x.next=16;break;case 13:x.prev=13,x.t0=x.catch(0),console.log(x.t0);case 16:case"end":return x.stop()}},Ue,null,[[0,13]])}))}),m(d,y)))})}),Fe=(0,ae.G)(Ae),pe=Fe,He=e(63185),be=e(9676),ze=e(96202),Le=e(85591),Ge=["options","fieldProps","proFieldProps","valueEnum"],Te=n.forwardRef(function(t,o){var i=t.options,T=t.fieldProps,y=t.proFieldProps,H=t.valueEnum,G=(0,ee.Z)(t,Ge);return n.createElement(Le.Z,(0,j.Z)({ref:o,valueType:"checkbox",mode:"edit",valueEnum:(0,ze.h)(H,void 0),fieldProps:(0,c.Z)({options:i},T),proFieldProps:y},G))}),X=n.forwardRef(function(t,o){var i=t.fieldProps,T=t.children;return n.createElement(be.Z,(0,j.Z)({ref:o},i),T)}),Se=(0,ae.G)(X,{valuePropName:"checked"}),he=Se;he.Group=Te;var je=he,ne=e(5966),We=e(34687),D=e.n(We),a=e(85893),Oe=function(o){var i=o.content;return(0,a.jsx)(oe.Z,{style:{marginBottom:24},message:i,type:"error",showIcon:!0})},z=function(){var o=(0,n.useState)({}),i=(0,q.Z)(o,2),T=i[0],y=i[1],H=(0,n.useState)("account"),G=(0,q.Z)(H,2),W=G[0],d=G[1],V=(0,v.tT)("@@initialState"),Y=V.initialState,re=V.setInitialState,h=(0,v.YB)(),C=function(){var Z=(0,U.Z)((0,P.Z)().mark(function u(){var m,f;return(0,P.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Y==null||(m=Y.fetchUserInfo)===null||m===void 0?void 0:m.call(Y);case 2:if(f=l.sent,!f){l.next=6;break}return l.next=6,re(function(E){return(0,B.Z)((0,B.Z)({},E),{},{currentUser:f})});case 6:case"end":return l.stop()}},u)}));return function(){return Z.apply(this,arguments)}}(),se=function(){var Z=(0,U.Z)((0,P.Z)().mark(function u(m){var f,M,l,E,O,I;return(0,P.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,R.x4)((0,B.Z)((0,B.Z)({},m),{},{type:W}));case 3:if(f=r.sent,f.status!=="ok"){r.next=16;break}return localStorage.setItem("user",JSON.stringify(f)),M=h.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),s.ZP.success(M),r.next=10,C();case 10:if(v.m8){r.next=12;break}return r.abrupt("return");case 12:return l=v.m8.location.query,E=l,O=E.redirect,v.m8.push(O||"/"),r.abrupt("return");case 16:console.log(f),y(f),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(0),I=h.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),s.ZP.error(I);case 24:case"end":return r.stop()}},u,null,[[0,20]])}));return function(m){return Z.apply(this,arguments)}}(),Ze=T.status,N=T.type;return(0,a.jsxs)("div",{className:D().container,children:[(0,a.jsx)("div",{className:D().lang,"data-lang":!0,children:v.pD&&(0,a.jsx)(v.pD,{})}),(0,a.jsx)("div",{className:D().content,children:(0,a.jsxs)(me,{logo:(0,a.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:h.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[],onFinish:function(){var Z=(0,U.Z)((0,P.Z)().mark(function u(m){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,se(m);case 2:case"end":return M.stop()}},u)}));return function(u){return Z.apply(this,arguments)}}(),children:[(0,a.jsxs)(J.Z,{activeKey:W,onChange:d,children:[(0,a.jsx)(J.Z.TabPane,{tab:h.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,a.jsx)(J.Z.TabPane,{tab:h.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),Ze==="error"&&N==="account"&&(0,a.jsx)(Oe,{content:h.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/123456)"})}),W==="account"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ne.Z,{name:"username",fieldProps:{size:"large",prefix:(0,a.jsx)(_.Z,{className:D().prefixIcon})},placeholder:h.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,a.jsx)(ne.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(A,{className:D().prefixIcon})},placeholder:h.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),Ze==="error"&&N==="mobile"&&(0,a.jsx)(Oe,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),W==="mobile"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ne.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)(ve,{className:D().prefixIcon})},name:"mobile",placeholder:h.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,a.jsx)(v._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,a.jsx)(pe,{fieldProps:{size:"large",prefix:(0,a.jsx)(A,{className:D().prefixIcon})},captchaProps:{size:"large"},placeholder:h.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(u,m){return u?"".concat(m," ").concat(h.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):h.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var Z=(0,U.Z)((0,P.Z)().mark(function u(m){var f;return(0,P.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,$({phone:m});case 2:if(f=l.sent,f!==!1){l.next=5;break}return l.abrupt("return");case 5:s.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return l.stop()}},u)}));return function(u){return Z.apply(this,arguments)}}()})]}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)(je,{noStyle:!0,name:"autoLogin",children:(0,a.jsx)(v._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,a.jsx)("a",{style:{float:"right"},children:(0,a.jsx)(v._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,a.jsx)(ie.Z,{})]})},w=z}}]);
